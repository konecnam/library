{% extends "layout.html" %}

{% block body %}
<h4 class="title_upload">Collection</h4>

<div hx-target="this" hx-swap="outerHTML">
    <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent  upload_book" hx-get="{% url 'add_collection_form_book' %}">add book</button>
</div>

<h4 class="title_upload">Saved Books</h4>
<div>
    {% if books %}
    {% for book in books %}
    <div class="book_image_collection">
        <div class="demo-card-square mdl-card small mdl-shadow--2dp">
            <div class="mdl-card__media small"
                style="background: url('{{book.image}}'); background-position: center; background-repeat: no-repeat; background-size: 140px 200px;">
                <!-- {% if book.image %} -->
                <!-- {% else %}
                    style="display: flex; align-items: center; justify-content: center; background-color: #f0f0f0; color: #888; width: 100%; height: 100%;"
                    <p>Obrázek není k dispozici</p>
                {% endif %} -->
            </div>
        </div>
        <div class="text-container">
                <div hx-target="this" hx-swap="outerHTML">
                    <h5>{{ book.book_title }}</h5>
                    <h5>{{ book.author }}</h5>
                    <p>Book description: {{ book.book_description }}</p>
                    <button class="custom-button" hx-get="{% url 'collection_edit' book.id %}">
                        Click To Edit
                    </button>
                </div>
            <form method="POST" action="{% url 'delete' %}">
            {% csrf_token %}
                <input type="hidden" name="delete_book_id" value="{{book.id}}">
                <button type="submit" style="border: none; background: none; cursor: pointer;">
                <i class="material-icons" style="margin: 8px;">delete</i>
                </button>
            </form>
        </div>
    </div>
    {% endfor %}
    {% else %}
    <p>No books saved yet.</p>
    {% endif %}
</div>


{% endblock %}